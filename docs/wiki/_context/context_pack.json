{
  "structure": {
    "tree": "deepwiki-skill/\n├── .claude/\n│   └── settings.local.json\n├── .claude-plugin/\n│   ├── marketplace.json\n│   └── plugin.json\n├── .gitignore\n├── LICENSE\n├── README.md\n├── agents/\n│   └── workflow-runner.md\n├── commands/\n│   └── gen.md\n└── skills/\n    └── wiki/\n        ├── SKILL.md\n        ├── references/\n        │   ├── doc_update_policy.md\n        │   ├── evidence_citation_policy.md\n        │   ├── mermaid_policy.md\n        │   ├── page_template.md\n        │   ├── toc_schema.md\n        │   ├── validation_policy.md\n        │   └── workflow/\n        │       ├── doc-summary.md\n        │       ├── doc-write.md\n        │       ├── incremental-sync.md\n        │       ├── repo-scan.md\n        │       ├── toc-design.md\n        │       └── validate-docs.md\n        ├── scripts/\n        │   ├── collect_context.py\n        │   ├── collect_git_diff.py\n        │   ├── collect_sync_context.py\n        │   ├── collect_update_context.py\n        │   ├── generate_summary.py\n        │   ├── get_section_update_diff.py\n        │   ├── read_files.py\n        │   ├── requirements.txt\n        │   ├── validate_docs_structure.py\n        │   └── validate_mermaid.py\n        └── templates/\n            └── toc.yaml.template",
    "file_count": 32,
    "directory_count": 13,
    "total_size": 240082,
    "total_size_formatted": "234.5 KB",
    "languages": {
      "Markdown": 16,
      "JSON": 3,
      "Python": 9
    }
  },
  "readme": {
    "content": "# deepwiki-skill\n\n**deepwiki-skill** is an agent skill for Claude Code (and any other AI agent that supports agent skills) that automatically generates comprehensive, wiki-style documentation for any codebase.\n\n## Why use deepwiki-skill\n\n- **Standard Agent Skill**: Not another standalone agent, but a reusable skill that works across multiple AI agents\n- **Zero Configuration Hassle**: Leverage your existing subscription without complex setup\n- **Evidence-Based & Hallucination-Free**: Every key statement includes precise line-level citations from source code\n- **Manual Structure Control**: Available to take full control of document structure, solving the problem of uncontrollable auto-generated content\n- **CI/CD Ready**: Built-in incremental updates feature makes it easy to deploy in CI/CD pipelines, keeping docs synchronized with code changes\n\n## Features\n\n- **Evidence-Based Documentation**: Every statement traced back to source files with line numbers\n- **Mermaid Diagram Support**: Generate and validate flowcharts, sequence diagrams, class diagrams, and more\n- **Flexible Execution Modes**: Fully automatic, TOC-file-based, or incremental updates\n- **Parallel Processing**: Subagents for faster documentation generation and better context isolation\n- **Smart Code Analysis**: Detects multiple programming languages, handles encoding detection, filters binary files\n- **Multi-Language & Markdown-Based Output**: Output as Markdown, simple control over output language\n\n## Quick Start\n\n### Prerequisites\n- Python >=3.12\n- Node.js and Mermaid CLI (for diagram validation)\n   ```bash\n   npm install -g @mermaid-js/mermaid-cli\n   ```\n\n### Installation\n\n> **Note**: While deepwiki-skill works with any coding agent that supports agent skills, Claude Code currently offers the best subagent support for optimal documentation generation. Claude Code is recommended for the best experience.\n\n#### Claude Code\n\nIn Claude Code, register the marketplace and install this plugin\n\n```\n/plugin marketplace add natsu1211/deepwiki-skill\n/plugin install deepwiki-skill@deepwiki-skill-marketplace\n```\n\nExecute `/skills` command in Claude Code then you should see `wiki` skill in the list.\n\n#### Gemini CLI\n> **Note**: Version >=0.24.0 is required to use agent skills. Manual installation will not install subagents, and generation quality may degrade due to the limited context window.\n\n<b>via Gemini CLI Extension</b>\n\n`coming soon...`\n\n<b>manual</b>\n\nCopy the skills folder into `~/.gemini` (user scope) or `project_dir/.gemini`(workspace scope)\n\n```\ngit clone https://github.com/natsu1211/deepwiki-skill && cd deepwiki-skill\ncp -R skills ~/.gemini\n```\n\nExecute `/skills` command in Gemini CLI then you should see `wiki` skill in the list.\n\n#### Codex\n> **Note**: Generation quality may degrade due to limited context window.\n\nCopy the skills folder into `~/.codex` (user scope) or `project_dir/.codex`(workspace scope)\n\n```\ngit clone https://github.com/natsu1211/deepwiki-skill && cd deepwiki-skill\ncp -R skills ~/.codex\n```\n\nExecute `/skills` command in Codex then you should see `wiki` skill in the list.\n\n### Usage\n\nJust write something like `Use wiki skill to generate wiki documentation` or `Invoke wiki skill to update documents at docs/wiki based on docs/wiki/toc.yaml` to tell agent to invoke skill.\n\nCustom command `gen` is also provided to parse the arguments and explicitly invoke the skill. This allows you to use the skill like a regular CLI tool, making inputs more concise while expressing intent more precisely.\n\nFully automatic wiki document generation:\n```bash\n/deepwiki-skill:gen\n```\n\nGenerate TOC file only:\n```bash\n/deepwiki-skill:gen --structure\n```\n\nGenerate from existing TOC:\n```bash\n/deepwiki-skill:gen docs/wiki/toc.yaml\n```\n\nUpdate documentation after manually changing `toc.yaml` and/or code changes:\n```bash\n/deepwiki-skill:gen docs/wiki/toc.yaml --update\n```\n\nSpecify output directory:\n```bash\n/deepwiki-skill:gen --output ./documentation/wiki\n```\n\nGenerate documentation in Chinese:\n```bash\n/deepwiki-skill:gen --language zh-CN\n```\n\nInclude only specific files:\n```bash\n/deepwiki-skill:gen --include \"src/**/*.ts\"\n```\n\nExclude test files:\n```bash\n/deepwiki-skill:gen --exclude \"**/*.test.js\"\n```\n\nCombined arguments:\n```bash\n/deepwiki-skill:gen --language zh-CN --output ./docs --exclude \"**/*.test.js\"\n```\n\nRun from CLI (yolo mode / headless mode):\n```bash\nclaude -p \"/deepwiki-skill:gen\" --dangerously-skip-permissions\n```\n\n\n\n**Available Arguments:**\n\n| Argument | Description |\n|----------|-------------|\n| `<toc.yaml>` | Path to existing TOC file |\n| `--structure` | Generate only TOC structure, stop before generating docs |\n| `--update` | Incremental update mode (requires TOC file path) |\n| `--output <dir>` | Output directory (default: `./docs/wiki/`) |\n| `--language <locale>` | Output language (default: `en-US`, supports almost any locale code) |\n| `--include <pattern>` | Include files matching pattern (can use multiple times) |\n| `--exclude <pattern>` | Exclude files matching pattern (can use multiple times) |\n\n\n### CI/CD Integration\n\n#### Claude Code\n\nIf you have a Pro/Max subscription, create an OAuth token first (if you prefer to use an API key, save the API key instead of an OAuth token to GitHub secrets).\n\nOpen your terminal and input\n```\nclaude setup-token\n```\n\nRecord the token output in your terminal and save it to GitHub secrets for your repository, giving it a name like `CLAUDE_CODE_OAUTH_TOKEN`.\n\nThen create the GitHub Actions workflow file.\nHere is a GitHub Actions workflow example that can be triggered manually to incrementally update existing documentation:\n```\nname: Wiki Doc Update\n\non:\n  workflow_dispatch:\n\njobs:\n  generate:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n      pull-requests: write\n      issues: write\n      id-token: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 1\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n\n      - name: Install mermaid-cli\n        run: npm install -g @mermaid-js/mermaid-cli\n\n      - name: Setup Python\n        uses: actions/setup-python@v5\n        with:\n          python-version: '3.12'\n\n      - name: Install Python dependencies\n        run: |\n          if [ -f skills/wiki/scripts/requirements.txt ]; then\n            pip install -r skills/wiki/scripts/requirements.txt\n          fi\n\n      - name: Run Wiki Doc Update\n        id: deepwiki-skill\n        uses: anthropics/claude-code-action@v1\n        with:\n          plugin_marketplaces: 'https://github.com/natsu1211/deepwiki-skill.git'\n          plugins: 'deepwiki-skill@deepwiki-skill-marketplace'\n          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}\n          prompt: '/deepwiki-skill:gen docs/wiki/toc.yaml --update'\n          additional_permissions: |\n            actions: read\n\n```\n\n#### Gemini CLI\nCheck out https://github.com/google-github-actions/run-gemini-cli\n\n#### Codex\nCheck out https://github.com/openai/codex-action\n\n## Example\nCheck out the documents generated by deepwiki-skill itself: [docs](./docs/wiki)\n\n## Technical Details\n### Workflow\n\ndeepwiki-skill operates through six distinct phases:\n\n#### 1. Repository Scan (`repo-scan`)\n- Analyzes repository structure and file organization\n- Detects programming languages and file types\n- Counts files and generates project statistics\n- Reads existing README and documentation\n\n#### 2. TOC Design (`toc-design`)\n- Designs wiki structure based on code analysis\n- Generates hierarchical Table of Contents\n- Creates `toc.yaml` with page definitions\n- Supports nested sections and auto-generation flags\n\n#### 3. Document Writing (`doc-write`)\n- Generates actual documentation pages\n- Includes evidence-based citations\n- Creates Mermaid diagrams for visualizations\n- Supports parallel page generation\n\n#### 4. Document Validation (`validate-docs`)\n- Validates document structure and markers\n- Checks Mermaid diagram syntax\n- Provides error reports with fix suggestions\n- Ensures TOC compliance\n\n#### 5. Summary Generation (`doc-summary`)\n- Creates `SUMMARY.md` report\n- Lists all generated pages\n- Includes validation results\n- Provides documentation statistics\n\n#### 6. Incremental Sync (`incremental-sync`)\n- Detects code changes via git diff\n- Identifies impacted documentation pages\n- Updates only affected sections\n- Maintains documentation consistency\n\n### Execution Modes\n\n| Mode | Phases | Use Case |\n|------|--------|----------|\n| **Automatic** | 1→2→3→4→5 | Generate complete documentation from scratch |\n| **Structure-only** | 1→2 | Design TOC without generating content |\n| **TOC-based** | 3→4→5 | Generate docs from existing TOC yaml file |\n| **Incremental** | 6→3→4→5 | Update docs after code changes |\n\n### Output Structure\n\n```\ndocs/wiki/\n├── toc.yaml                  # Table of Contents definition\n├── 01_overview.md            # Generated pages\n├── 02_architecture.md\n├── 03_workflow.md\n├── _context/\n│   └── context_pack.json     # Context data for generation\n└── _reports/\n    ├── SUMMARY.md            # Documentation summary report\n    ├── mermaid_invalid.json  # Mermaid diagram validation\n    └── structure_validation.json\n```\n\n## LICENSE\nMIT\n",
    "path": "/Users/long/github/deepwiki-skill/README.md",
    "encoding": "utf-8"
  },
  "metadata": {
    "repo_path": "/Users/long/github/deepwiki-skill",
    "has_readme": true,
    "budget_used": true,
    "total_size": 11601,
    "total_size_formatted": "11.3 KB",
    "structure_truncated": false,
    "structure_depth_used": 10,
    "readme_truncated": false
  }
}